# Copilot Instructions for java.evolved

## Project Overview

This is a static site showcasing modern Java patterns vs legacy approaches.
It is hosted on GitHub Pages at https://javaevolved.github.io.

## Architecture

### Source of Truth: JSON Files

Each pattern is defined as a JSON file in its **category subfolder**:

```
language/type-inference-with-var.json
collections/immutable-list-creation.json
streams/stream-tolist.json
...
```

**Categories:** `language`, `collections`, `strings`, `streams`, `concurrency`, `io`, `errors`, `datetime`, `security`, `tooling`

### Generated Files (DO NOT EDIT)

The following are **generated by `generate.py`** and must not be edited directly:

- `language/*.html`, `collections/*.html`, etc. ‚Äî detail pages
- `data/snippets.json` ‚Äî aggregated search index

Run `python3 generate.py` to rebuild all generated files from the JSON sources.

### Manually Maintained Files

- `index.html` ‚Äî homepage with preview cards (must be updated manually when adding/removing patterns)
- `app.js` ‚Äî client-side search, filtering, code highlighting
- `styles.css` ‚Äî all styling
- `slug-template.html` ‚Äî reference template (actual generation is in `generate.py`)

## JSON Snippet Schema

Each `category/slug.json` file has this structure:

```json
{
  "id": 1,
  "slug": "type-inference-with-var",
  "title": "Type inference with var",
  "category": "language",
  "difficulty": "beginner|intermediate|advanced",
  "jdkVersion": "10",
  "oldLabel": "Java 8",
  "modernLabel": "Java 10+",
  "oldApproach": "Explicit Types",
  "modernApproach": "var keyword",
  "oldCode": "// old way...",
  "modernCode": "// modern way...",
  "summary": "One-line description.",
  "explanation": "How it works paragraph.",
  "whyModernWins": [
    { "icon": "‚ö°", "title": "Short title", "desc": "One sentence." },
    { "icon": "üëÅ", "title": "Short title", "desc": "One sentence." },
    { "icon": "üîí", "title": "Short title", "desc": "One sentence." }
  ],
  "support": "Widely available since JDK 10 (March 2018)",
  "prev": "category/slug-of-previous",
  "next": "category/slug-of-next",
  "related": [
    "category/slug-1",
    "category/slug-2",
    "category/slug-3"
  ]
}
```

### Key Rules

- `slug` must match the filename (without `.json`)
- `category` must match the parent folder name
- `whyModernWins` must have exactly **3** entries
- `related` must have exactly **3** entries (as `category/slug` paths)
- `prev`/`next` are `category/slug` paths or `null` for first/last
- Code in `oldCode`/`modernCode` uses `\n` for newlines

## Category Display Names

| ID | Display |
|----|---------|
| `language` | Language |
| `collections` | Collections |
| `strings` | Strings |
| `streams` | Streams |
| `concurrency` | Concurrency |
| `io` | I/O |
| `errors` | Errors |
| `datetime` | Date/Time |
| `security` | Security |
| `tooling` | Tooling |

## Adding a New Pattern

1. Create `category/new-slug.json` with all required fields
2. Update `prev`/`next` in the adjacent patterns' JSON files
3. Add a preview card in `index.html`
4. Run `python3 generate.py`

## Local Development

```bash
python3 generate.py              # Build HTML pages + snippets.json
python3 -m http.server 8090      # Serve locally
```
